import{a8 as c}from"./index-30b66760.js";let p="https://sd-analytics.savantdegrees.com";const h="/api/v1",l=p+h,T=(u={})=>{const a=c.create({});return a.interceptors.request.use(e=>{const t=sessionStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response.status===403&&!t._retry){t._retry=!0;const n=sessionStorage.getItem("refreshToken");if(n)try{const s=(await c.post("https://open-ai-poc.savantdegrees.com/api/v1/auth/refreshToken",{token:n})).data,{accessToken:o,refreshToken:i}=s.result;return sessionStorage.setItem("accessToken",o),sessionStorage.setItem("refreshToken",i),t.headers.Authorization=`Bearer ${o}`,c(t)}catch(r){console.error("Failed to refresh token:",r),localStorage.removeItem("userData"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),window.location.href="/login"}}return Promise.reject(e)}),{get:(e,t=void 0)=>new Promise((n,r)=>{a.get(e,t).then(s=>{n(s.data)}).catch(s=>r(s))}),post:(e,t=void 0,n=void 0)=>new Promise((r,s)=>{a.post(e,t,n).then(o=>{r(o.data)}).catch(o=>s(o))}),remove:async(e,t=void 0)=>new Promise((n,r)=>{a.delete(e,t).then(s=>{n(s.data)}).catch(s=>r(s))}),patch:(e,t=void 0,n=void 0)=>new Promise((r,s)=>{a.patch(e,t,n).then(o=>{r(o.data)}).catch(o=>s(o))})}};export{T as a,l as b};
