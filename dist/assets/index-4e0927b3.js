import{_ as j}from"./MoreBtn-ede11068.js";import{_ as q}from"./AppDateTimePicker-8227ee10.js";import{k as c,a0 as Q,a6 as Y,r as A,m as t,o as _,c as D,C as o,n as i,$ as V,p as s,a2 as S,t as x,Y as y,v as r,s as G,b as N,ag as H,y as J}from"./index-30b66760.js";import{u as K}from"./useInvoiceStore-e879a6f0.js";import{a as W}from"./formatters-33197472.js";import{c as U,V as E}from"./VCard-db64c41e.js";import{V as X,a as L}from"./VRow-b0db7b1d.js";import{V as C}from"./VSelect-8600eec3.js";import{V as Z}from"./VSpacer-a17cbd45.js";import{V as ee}from"./VTextField-1e90003c.js";import{V as te}from"./VDataTableServer-64897da7.js";import{V as ae}from"./VTooltip-d996192b.js";import{V as M}from"./VAvatar-2c83efa5.js";import{V as oe}from"./VImg-c7c2167a.js";import{V as ie}from"./VChip-ca3f8676.js";import{V as R}from"./VDivider-0d474c05.js";import"./VMenu-55b2ccf7.js";import"./forwardRefs-a29b5f65.js";import"./VOverlay-17b4c386.js";import"./lazy-fe618c41.js";import"./easing-9f15041e.js";import"./transition-0c6e30e4.js";import"./dialog-transition-9418ede6.js";import"./VList-d87f0460.js";import"./ssrBoot-050ef406.js";import"./VField-027419e4.js";import"./VInput-cd4c7816.js";import"./index-61e4df1a.js";import"./VCheckboxBtn-a5502da0.js";import"./VSelectionControl-a507e867.js";/* empty css                   */import"./VCounter-e2a77d8b.js";import"./VDataTable-a879dec1.js";import"./filter-a3cf0501.js";import"./VTable-944d2dec.js";const ne={key:0},le={class:"me-3"},se={class:"d-flex align-center flex-wrap gap-6"},re={class:"invoice-list-search"},ce={class:"mb-0"},de={class:"mb-0"},me={class:"mb-0"},pe={class:"d-flex align-center"},ue={key:1},ve={class:"d-flex flex-column"},fe={class:"text-sm font-weight-medium mb-0"},ge={class:"text-caption"},_e={class:"text-sm"},we={class:"text-sm"},he={key:1,class:"text-high-emphasis text-sm"},Ve={class:"d-flex justify-end flex-wrap gap-x-6 pa-2"},xe={class:"d-flex align-center gap-x-2 text-sm"},ye={class:"d-flex align-center text-sm text-high-emphasis me-2"},be={class:"d-flex gap-x-2 align-center me-2"},lt={__name:"index",setup(Pe){const B=K(),p=c(""),d=c(""),g=c(),u=c(0),b=c([]),w=c([]),n=c({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),P=c(!1),z=[{title:"#",key:"id"},{title:"Trending",key:"trending",sortable:!1},{title:"CLIENT",key:"client"},{title:"TOTAL",key:"total"},{title:"DATE",key:"date"},{title:"BALANCE",key:"balance"},{title:"ACTION",key:"action",sortable:!1}],T=(l,a,f,I,h)=>{P.value=!0,B.fetchInvoices({q:l,status:a,startDate:f,endDate:I,options:h}).then(m=>{b.value=m.data.invoices,u.value=m.data.totalInvoices,n.value.page=m.data.page}).catch(m=>{console.log(m)}),P.value=!1},v=(l,a)=>l===a?{status:"Unpaid",chip:{color:"error"}}:l===0?{status:"Paid",chip:{color:"success"}}:{status:l,chip:{variant:"text"}},k=l=>l==="Partial Payment"?{variant:"warning",icon:"mdi-chart-timeline-variant"}:l==="Paid"?{variant:"success",icon:"mdi-check"}:l==="Downloaded"?{variant:"info",icon:"mdi-arrow-down"}:l==="Draft"?{variant:"secondary",icon:"mdi-content-save-outline"}:l==="Sent"?{variant:"primary",icon:"mdi-email-outline"}:l==="Past Due"?{variant:"error",icon:"mdi-alert-circle-outline"}:{variant:"secondary",icon:"mdi-close"},F=Q(()=>l=>[{title:"Download",value:"download",prependIcon:"mdi-download-outline"},{title:"Edit",value:"edit",prependIcon:"mdi-pencil-outline",to:{name:"apps-invoice-edit-id",params:{id:l}}},{title:"Duplicate",value:"duplicate",prependIcon:"mdi-layers-outline"}]),O=l=>{B.deleteInvoice(l).then(()=>{var a,f;T(p.value,g.value,(a=d.value)==null?void 0:a.split("to")[0],(f=d.value)==null?void 0:f.split("to")[1],n.value)}).catch(a=>{console.log(a)})};return Y(()=>{const[l,a]=d.value?d.value.split("to"):"";T(p.value,g.value,l,a,n.value)}),(l,a)=>{const f=q,I=A("RouterLink"),h=A("IconBtn"),m=j;return t(b)?(_(),D("section",ne,[o(E,{title:"Filters",class:"mb-6"},{default:i(()=>[o(U,null,{default:i(()=>[o(X,null,{default:i(()=>[o(L,{cols:"12",md:"6"},{default:i(()=>[o(C,{modelValue:t(g),"onUpdate:modelValue":a[0]||(a[0]=e=>V(g)?g.value=e:null),label:"Select Status",clearable:"","clear-icon":"mdi-close",items:["Downloaded","Draft","Sent","Paid","Partial Payment","Past Due"]},null,8,["modelValue"])]),_:1}),o(L,{cols:"12",md:"6"},{default:i(()=>[o(f,{modelValue:t(d),"onUpdate:modelValue":a[1]||(a[1]=e=>V(d)?d.value=e:null),label:"Invoice Date","clear-icon":"mdi-close",clearable:"",config:{mode:"range"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(E,{id:"invoice-list"},{default:i(()=>[o(U,{class:"d-flex align-center flex-wrap gap-4"},{default:i(()=>[s("div",le,[o(C,{density:"compact",label:"Action",items:["Delete","Edit","Send"],class:"invoice-list-actions",disabled:!t(w).length},null,8,["disabled"])]),o(Z),s("div",se,[s("div",re,[o(ee,{modelValue:t(p),"onUpdate:modelValue":a[2]||(a[2]=e=>V(p)?p.value=e:null),placeholder:"Search Invoice",density:"compact"},null,8,["modelValue"])]),o(S,{to:{name:"apps-invoice-add"}},{default:i(()=>[x(" Create invoice ")]),_:1})])]),_:1}),o(t(te),{modelValue:t(w),"onUpdate:modelValue":a[6]||(a[6]=e=>V(w)?w.value=e:null),"items-per-page":t(n).itemsPerPage,"onUpdate:itemsPerPage":a[7]||(a[7]=e=>t(n).itemsPerPage=e),page:t(n).page,"onUpdate:page":a[8]||(a[8]=e=>t(n).page=e),search:t(p),loading:t(P),"show-select":"","items-length":t(u),headers:z,items:t(b),class:"text-no-wrap rounded-0","onUpdate:options":a[9]||(a[9]=e=>n.value=e)},{"column.trending":i(()=>[o(y,{size:"22",icon:"mdi-arrow-up"})]),"item.id":i(({item:e})=>[o(I,{to:{name:"apps-invoice-preview-id",params:{id:e.value}},class:"text-sm"},{default:i(()=>[x(" #"+r(e.raw.id),1)]),_:2},1032,["to"])]),"item.trending":i(({item:e})=>[o(ae,null,{activator:i(({props:$})=>[o(M,G({size:34},$,{color:k(e.raw.invoiceStatus).variant,variant:"tonal"}),{default:i(()=>[o(y,{size:20,icon:k(e.raw.invoiceStatus).icon},null,8,["icon"])]),_:2},1040,["color"])]),default:i(()=>[s("p",ce,r(e.raw.invoiceStatus),1),s("p",de," Balance: "+r(e.raw.balance),1),s("p",me," Due date: "+r(e.raw.dueDate),1)]),_:2},1024)]),"item.client":i(({item:e})=>[s("div",pe,[o(M,{size:"34",color:e.raw.avatar.length?void 0:k(e.raw.invoiceStatus).variant,variant:e.raw.avatar.length?void 0:"tonal",class:"me-3"},{default:i(()=>[e.raw.avatar.length?(_(),N(oe,{key:0,src:e.raw.avatar},null,8,["src"])):(_(),D("span",ue,r(t(W)(e.raw.client.name)),1))]),_:2},1032,["color","variant"]),s("div",ve,[s("h6",fe,r(e.raw.client.name),1),s("span",ge,r(e.raw.client.companyEmail),1)])])]),"item.total":i(({item:e})=>[s("span",_e," $"+r(e.raw.total),1)]),"item.date":i(({item:e})=>[s("span",we,r(e.raw.issuedDate),1)]),"item.balance":i(({item:e})=>[typeof v(e.raw.balance,e.raw.total).status=="string"?(_(),N(ie,{key:0,color:v(e.raw.balance,e.raw.total).chip.color,density:"comfortable"},{default:i(()=>[x(r(v(e.raw.balance,e.raw.total).status),1)]),_:2},1032,["color"])):(_(),D("span",he,r(Number(v(e.raw.balance,e.raw.total).status)>0?`$${v(e.raw.balance,e.raw.total).status}`:`-$${Math.abs(Number(v(e.raw.balance,e.raw.total).status))}`),1))]),"item.action":i(({item:e})=>[o(h,{onClick:$=>O(e.raw.id)},{default:i(()=>[o(y,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"]),o(h,{to:{name:"apps-invoice-preview-id",params:{id:e.raw.id}}},{default:i(()=>[o(y,{icon:"mdi-eye-outline"})]),_:2},1032,["to"]),o(m,{"menu-list":t(F)(e.raw.id),"item-props":""},null,8,["menu-list"])]),bottom:i(()=>[o(R),s("div",Ve,[s("div",xe,[x(" Rows Per Page: "),o(C,{modelValue:t(n).itemsPerPage,"onUpdate:modelValue":a[3]||(a[3]=e=>t(n).itemsPerPage=e),class:"per-page-select text-high-emphasis",variant:"plain",density:"compact",items:[10,20,25,50,100]},null,8,["modelValue"])]),s("span",ye,r(t(H)(t(n),t(u))),1),s("div",be,[o(S,{class:"flip-in-rtl",icon:"mdi-chevron-left",variant:"text",density:"comfortable",color:"default",disabled:t(n).page<=1,onClick:a[4]||(a[4]=e=>t(n).page<=1?t(n).page=1:t(n).page--)},null,8,["disabled"]),o(S,{class:"flip-in-rtl",icon:"mdi-chevron-right",density:"comfortable",variant:"text",color:"default",disabled:t(n).page>=Math.ceil(t(u)/t(n).itemsPerPage),onClick:a[5]||(a[5]=e=>t(n).page>=Math.ceil(t(u)/t(n).itemsPerPage)?t(n).page=Math.ceil(t(u)/t(n).itemsPerPage):t(n).page++)},null,8,["disabled"])])])]),_:1},8,["modelValue","items-per-page","page","search","loading","items-length","items"]),o(R)]),_:1})])):J("",!0)}}};export{lt as default};
