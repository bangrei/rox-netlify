import{_ as te}from"./DialogCloseBtn-d9d81ae7.js";import{V as F,a as se,b as le,d as re,c as z}from"./VCard-db64c41e.js";import{V as oe}from"./VForm-5a29b781.js";import{V as X}from"./VTextField-1e90003c.js";import{V as ne}from"./VTable-944d2dec.js";import{V as T}from"./VCheckbox-475ad393.js";import{k as f,a0 as H,w as B,o as _,b as D,n as a,C as e,t as U,v,m as t,$ as C,p as l,c as k,F as L,a as Q,a2 as R,aj as $,ak as A,a5 as S,a3 as E,a4 as I,al as O,am as J,an as ie,r as Z,y as q,x as de,Y as W,a6 as ue,ag as me}from"./index-30b66760.js";import{V as ce}from"./VDialog-39650760.js";import{a as M,V as Y}from"./VRow-b0db7b1d.js";import{V as G}from"./VSpacer-a17cbd45.js";import{V as j}from"./VAvatar-2c83efa5.js";import{_ as pe}from"./AddNewUserDrawer-376453a7.js";import{u as fe}from"./useUserListStore-eddcce2e.js";import{a as ge}from"./formatters-33197472.js";import{V as K}from"./VSelect-8600eec3.js";import{V as _e}from"./VDataTableServer-64897da7.js";import{V as ve}from"./VImg-c7c2167a.js";import{V as he}from"./VChip-ca3f8676.js";import{V as we}from"./VDivider-0d474c05.js";import"./VInput-cd4c7816.js";import"./transition-0c6e30e4.js";import"./forwardRefs-a29b5f65.js";/* empty css                   */import"./VField-027419e4.js";import"./easing-9f15041e.js";import"./VCounter-e2a77d8b.js";import"./VCheckboxBtn-a5502da0.js";import"./VSelectionControl-a507e867.js";import"./VOverlay-17b4c386.js";import"./lazy-fe618c41.js";import"./dialog-transition-9418ede6.js";import"./AppDrawerHeaderSection-75e1c295.js";import"./vue3-perfect-scrollbar.esm-a93fe39d.js";import"./validators-d1aa93b7.js";import"./index-61e4df1a.js";import"./VNavigationDrawer-92e5776b.js";import"./ssrBoot-050ef406.js";import"./VList-d87f0460.js";import"./VMenu-55b2ccf7.js";import"./VDataTable-a879dec1.js";import"./filter-a3cf0501.js";const Ve=l("h6",{class:"text-h6 mt-4"}," Role Permissions ",-1),xe=l("td",null," Administrator Access ",-1),be={colspan:"3"},ye={class:"d-flex align-center justify-center gap-3 mt-6"},Pe={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(N,{emit:x}){const p=N,d=f([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),g=f(!1),b=f(""),y=f(),c=H(()=>{let o=0;return d.value.forEach(u=>{Object.entries(u).forEach(([V,m])=>{V!=="name"&&m&&o++})}),o}),w=H(()=>c.value>0&&c.value<d.value.length*3);B(g,o=>{d.value=d.value.map(u=>({...u,read:o,write:o,create:o}))}),B(w,()=>{w.value||(g.value=!1)}),B(d,()=>{c.value===d.value.length*3&&(g.value=!0)},{deep:!0}),B(p,()=>{p.rolePermissions&&p.rolePermissions.permissions.length&&(b.value=p.rolePermissions.name,d.value=d.value.map(o=>{var V;const u=(V=p.rolePermissions)==null?void 0:V.permissions.find(m=>m.name===o.name);return u?{...o,...u}:o}))});const n=()=>{var u;const o={name:b.value,permissions:d.value};console.log("huat the fak"),console.log(o),x("update:rolePermissions",o),x("update:isDialogVisible",!1),g.value=!1,(u=y.value)==null||u.reset()},i=()=>{var o;x("update:isDialogVisible",!1),g.value=!1,(o=y.value)==null||o.reset()};return(o,u)=>{const V=te;return _(),D(ce,{width:o.$vuetify.display.smAndDown?"auto":900,"model-value":p.isDialogVisible,"onUpdate:modelValue":i},{default:a(()=>[e(F,{class:"pa-sm-8 pa-5"},{default:a(()=>[e(V,{variant:"text",size:"small",onClick:i}),e(se,{class:"text-center"},{default:a(()=>[e(le,{class:"text-h5"},{default:a(()=>[U(v(p.rolePermissions.name?"Edit":"Add")+" Role ",1)]),_:1}),e(re,null,{default:a(()=>[U(" Set Role Permissions ")]),_:1})]),_:1}),e(z,{class:"mt-6"},{default:a(()=>[e(t(oe),{ref_key:"refPermissionForm",ref:y},{default:a(()=>[e(X,{modelValue:t(b),"onUpdate:modelValue":u[0]||(u[0]=m=>C(b)?b.value=m:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),Ve,e(ne,{class:"permission-table text-no-wrap"},{default:a(()=>[l("tr",null,[xe,l("td",be,[e(T,{modelValue:t(g),"onUpdate:modelValue":u[1]||(u[1]=m=>C(g)?g.value=m:null),indeterminate:t(w),"onUpdate:indeterminate":u[2]||(u[2]=m=>C(w)?w.value=m:null),label:"Select All"},null,8,["modelValue","indeterminate"])])]),(_(!0),k(L,null,Q(t(d),m=>(_(),k("tr",{key:m.name},[l("td",null,v(m.name),1),l("td",null,[e(T,{modelValue:m.read,"onUpdate:modelValue":P=>m.read=P,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[e(T,{modelValue:m.write,"onUpdate:modelValue":P=>m.write=P,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])]),l("td",null,[e(T,{modelValue:m.create,"onUpdate:modelValue":P=>m.create=P,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),_:1}),l("div",ye,[e(R,{onClick:n},{default:a(()=>[U(" Submit ")]),_:1}),e(R,{color:"secondary",variant:"tonal",onClick:i},{default:a(()=>[U(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ue="/assets/avatar-2-0ae005f8.png",Ce="/assets/avatar-1-aac046b6.png",ke="/assets/pose_m1-bfc1d627.png",De={class:"v-avatar-group"},Re={class:"text-h6 text-medium-emphasis mb-0"},Me={class:"d-flex align-center"},$e=["onClick"],Ae=["src"],Se=l("span",{class:"text-end"},"Add new role, if it doesn't exist.",-1),Ee={__name:"RoleCards",setup(N){const x=f([{role:"Administrator",users:[$,A,S,E],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[$,A,S,E,I,O,J],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[$,A,S,E,I],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[$,A,S,E,I,O],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[$,A,S,E,I,O,J,ie,Ce,Ue],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),p=f(!1),d=f(),g=f(!1),b=y=>{p.value=!0,d.value=y};return(y,c)=>{const w=Z("IconBtn"),n=Pe;return _(),k(L,null,[e(Y,null,{default:a(()=>[(_(!0),k(L,null,Q(t(x),i=>(_(),D(M,{key:i.role,cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(F,null,{default:a(()=>[e(z,{class:"d-flex align-center"},{default:a(()=>[l("span",null,"Total "+v(i.users.length)+" users",1),e(G),l("div",De,[(_(!0),k(L,null,Q(i.users,(o,u)=>(_(),k(L,{key:o},[i.users.length>4&&i.users.length!==4&&u<3?(_(),D(j,{key:0,size:"44",image:o},null,8,["image"])):q("",!0),i.users.length===4?(_(),D(j,{key:1,size:"44",image:o},null,8,["image"])):q("",!0)],64))),128)),i.users.length>4?(_(),D(j,{key:0,color:"#eee"},{default:a(()=>[l("span",{class:de(["text-lg",y.$vuetify.theme.current.dark?"text-background":"text-high-emphasis"])}," +"+v(i.users.length-3),3)]),_:2},1024)):q("",!0)])]),_:2},1024),e(z,null,{default:a(()=>[l("p",Re,v(i.role),1),l("div",Me,[l("a",{href:"javascript:void(0)",onClick:o=>b(i.details)}," Edit Role ",8,$e),e(G),e(w,{size:"small",color:"default"},{default:a(()=>[e(W,{size:"24",icon:"mdi-content-copy"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(M,{cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(F,{class:"h-100",ripple:!1,onClick:c[0]||(c[0]=i=>g.value=!0)},{default:a(()=>[e(Y,{"no-gutters":"",class:"h-100"},{default:a(()=>[e(M,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:a(()=>[l("img",{width:"65",src:t(ke)},null,8,Ae)]),_:1}),e(M,{cols:"7"},{default:a(()=>[e(z,{class:"d-flex flex-column align-end justify-start gap-2 h-100"},{default:a(()=>[e(R,null,{default:a(()=>[U("Add Role")]),_:1}),Se]),_:1})]),_:1})]),_:1})]),_:1}),e(n,{"is-dialog-visible":t(g),"onUpdate:isDialogVisible":c[1]||(c[1]=i=>C(g)?g.value=i:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(n,{"is-dialog-visible":t(p),"onUpdate:isDialogVisible":c[2]||(c[2]=i=>C(p)?p.value=i:null),"role-permissions":t(d),"onUpdate:rolePermissions":c[3]||(c[3]=i=>C(d)?d.value=i:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}};const Le={class:"app-user-search-filter d-flex align-center gap-6"},ze={class:"d-flex"},Ne={key:1},Te={class:"d-flex flex-column"},Be={class:"text-sm font-weight-medium"},Ie={class:"text-xs text-medium-emphasis"},je={class:"d-flex gap-2"},Fe={class:"text-capitalize"},Oe={class:"text-sm"},qe={class:"text-capitalize text-high-emphasis"},Qe={class:"d-flex justify-end gap-x-6 pa-2 flex-wrap"},We={class:"d-flex align-center gap-x-2 text-sm"},Ye={class:"d-flex align-center text-sm me-2 text-high-emphasis"},Ge={class:"d-flex gap-x-2 align-center me-2"},He={__name:"UserList",setup(N){const x=fe(),p=f(""),d=f(),g=f(),b=f(),y=f(1),c=f(0),w=f([]),n=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),i=[{title:"USER",key:"user"},{title:"EMAIL",key:"email"},{title:"ROLE",key:"role"},{title:"PLAN",key:"plan"},{title:"STATUS",key:"status"},{title:"ACTION",key:"actions",sortable:!1}],o=()=>{x.fetchUsers({q:p.value,status:b.value,plan:g.value,role:d.value,options:n.value}).then(h=>{w.value=h.data.users,y.value=h.data.totalPage,c.value=h.data.totalUsers}).catch(h=>{console.error(h)})};ue(o);const u=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],V=h=>{const r=h.toLowerCase();return r==="subscriber"?{color:"primary",icon:"mdi-account-outline"}:r==="author"?{color:"warning",icon:"mdi-cog-outline"}:r==="maintainer"?{color:"success",icon:"mdi-chart-donut"}:r==="editor"?{color:"info",icon:"mdi-pencil-outline"}:r==="admin"?{color:"error",icon:"mdi-laptop"}:{color:"primary",icon:"mdi-account-outline"}},m=h=>{const r=h.toLowerCase();return r==="pending"?"warning":r==="active"?"success":r==="inactive"?"secondary":"primary"},P=f(!1),ee=h=>{x.addUser(h),o()};return(h,r)=>{const ae=Z("RouterLink");return _(),k("section",null,[e(F,null,{default:a(()=>[e(z,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(R,{variant:"outlined",color:"disabled","prepend-icon":"mdi-tray-arrow-up"},{default:a(()=>[U(" Export ")]),_:1}),e(G),l("div",Le,[e(X,{modelValue:t(p),"onUpdate:modelValue":r[0]||(r[0]=s=>C(p)?p.value=s:null),placeholder:"Search User",density:"compact",style:{width:"8rem"}},null,8,["modelValue"]),e(K,{modelValue:t(d),"onUpdate:modelValue":r[1]||(r[1]=s=>C(d)?d.value=s:null),label:"Select Role",items:u,density:"compact",clearable:"","clear-icon":"mdi-close",style:{width:"6rem"}},null,8,["modelValue"])])]),_:1}),e(t(_e),{"items-per-page":t(n).itemsPerPage,"onUpdate:itemsPerPage":r[5]||(r[5]=s=>t(n).itemsPerPage=s),page:t(n).page,"onUpdate:page":r[6]||(r[6]=s=>t(n).page=s),items:t(w),"items-length":t(c),headers:i,"show-select":"",class:"text-no-wrap rounded-0","onUpdate:options":r[7]||(r[7]=s=>n.value=s)},{"item.user":a(({item:s})=>[l("div",ze,[e(j,{size:"34",variant:s.raw.avatar?void 0:"tonal",color:s.raw.avatar?void 0:V(s.raw.role).color,class:"me-3"},{default:a(()=>[s.raw.avatar?(_(),D(ve,{key:0,src:s.raw.avatar},null,8,["src"])):(_(),k("span",Ne,v(t(ge)(s.raw.fullName)),1))]),_:2},1032,["variant","color"]),l("div",Te,[l("h6",Be,[e(ae,{to:{name:"apps-user-view-id",params:{id:s.raw.id}},class:"font-weight-medium user-list-name"},{default:a(()=>[U(v(s.raw.fullName),1)]),_:2},1032,["to"])]),l("span",Ie,"@"+v(s.raw.username),1)])])]),"item.role":a(({item:s})=>[l("div",je,[e(W,{icon:V(s.raw.role).icon,color:V(s.raw.role).color},null,8,["icon","color"]),l("span",Fe,v(s.raw.role),1)])]),"item.email":a(({item:s})=>[l("span",Oe,v(s.raw.email),1)]),"item.plan":a(({item:s})=>[l("span",qe,v(s.raw.currentPlan),1)]),"item.status":a(({item:s})=>[e(he,{color:m(s.raw.status),density:"comfortable",class:"text-capitalize"},{default:a(()=>[U(v(s.raw.status),1)]),_:2},1032,["color"])]),"item.actions":a(({item:s})=>[e(R,{icon:"",variant:"text",size:"small",color:"medium-emphasis",to:{name:"apps-user-view-id",params:{id:s.raw.id}}},{default:a(()=>[e(W,{size:"24",icon:"mdi-eye-outline"})]),_:2},1032,["to"])]),bottom:a(()=>[e(we),l("div",Qe,[l("div",We,[U(" Rows Per Page: "),e(K,{modelValue:t(n).itemsPerPage,"onUpdate:modelValue":r[2]||(r[2]=s=>t(n).itemsPerPage=s),class:"per-page-select text-high-emphasis",variant:"plain",density:"compact",items:[10,20,25,50,100]},null,8,["modelValue"])]),l("span",Ye,v(t(me)(t(n),t(c))),1),l("div",Ge,[e(R,{icon:"mdi-chevron-left",class:"flip-in-rtl",variant:"text",density:"comfortable",color:"default",disabled:t(n).page<=1,onClick:r[3]||(r[3]=s=>t(n).page<=1?t(n).page=1:t(n).page--)},null,8,["disabled"]),e(R,{class:"flip-in-rtl",icon:"mdi-chevron-right",density:"comfortable",variant:"text",color:"default",disabled:t(n).page>=Math.ceil(t(c)/t(n).itemsPerPage),onClick:r[4]||(r[4]=s=>t(n).page>=Math.ceil(t(c)/t(n).itemsPerPage)?t(n).page=Math.ceil(t(c)/t(n).itemsPerPage):t(n).page++)},null,8,["disabled"])])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(pe,{isDrawerOpen:t(P),"onUpdate:isDrawerOpen":r[8]||(r[8]=s=>C(P)?P.value=s:null),onUserData:ee},null,8,["isDrawerOpen"])])}}},Je=l("h5",{class:"text-h5 mb-1"}," Roles List ",-1),Ke=l("p",{class:"text-sm mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),Xe=l("h5",{class:"text-h5 mt-5 mb-1"}," Total users with their roles ",-1),Ze=l("p",{class:"text-sm mb-6"}," Find all of your company's administrator accounts and their associate roles. ",-1),ja={__name:"index",setup(N){return(x,p)=>(_(),D(Y,null,{default:a(()=>[e(M,{cols:"12"},{default:a(()=>[Je,Ke]),_:1}),e(M,{cols:"12"},{default:a(()=>[e(Ee)]),_:1}),e(M,{cols:"12"},{default:a(()=>[Xe,Ze,e(He)]),_:1})]),_:1}))}};export{ja as default};
